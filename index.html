
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the CaiGunn API"
        >
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-9c19b03a.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-966d6edc.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/apmic_logo_light.aed03332-2ea4d1f2.svg" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="python">Python-Request</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#change-log" class="toc-h1 toc-link" data-title="Change Log">Change Log</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#2024-05-09" class="toc-h2 toc-link" data-title="2024-05-09">2024-05-09</a>
                  </li>
                  <li>
                    <a href="#2024-01-31" class="toc-h2 toc-link" data-title="2024-01-31">2024-01-31</a>
                  </li>
                  <li>
                    <a href="#2023-11-10" class="toc-h2 toc-link" data-title="2023-11-10">2023-11-10</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#chatbot" class="toc-h1 toc-link" data-title="Chatbot">Chatbot</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-update-webhook" class="toc-h2 toc-link" data-title="Create/Update webhook">Create/Update webhook</a>
                  </li>
                  <li>
                    <a href="#create-training-data" class="toc-h2 toc-link" data-title="Create Training Data">Create Training Data</a>
                  </li>
                  <li>
                    <a href="#train-a-model" class="toc-h2 toc-link" data-title="Train a Model">Train a Model</a>
                  </li>
                  <li>
                    <a href="#get-all-models" class="toc-h2 toc-link" data-title="Get All Models">Get All Models</a>
                  </li>
                  <li>
                    <a href="#update-chatbot-model" class="toc-h2 toc-link" data-title="Update Chatbot Model">Update Chatbot Model</a>
                  </li>
                  <li>
                    <a href="#talk-with-chatbot" class="toc-h2 toc-link" data-title="Talk With Chatbot">Talk With Chatbot</a>
                  </li>
                  <li>
                    <a href="#get-historical-messages" class="toc-h2 toc-link" data-title="Get Historical Messages">Get Historical Messages</a>
                  </li>
                  <li>
                    <a href="#get-conversation-uids" class="toc-h2 toc-link" data-title="Get Conversation UIDs">Get Conversation UIDs</a>
                  </li>
                  <li>
                    <a href="#bind-opentalk-device" class="toc-h2 toc-link" data-title="Bind Opentalk Device">Bind Opentalk Device</a>
                  </li>
                  <li>
                    <a href="#unbind-opentalk-device" class="toc-h2 toc-link" data-title="Unbind Opentalk Device">Unbind Opentalk Device</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://caigunn.ap-mic.com'>Sign Up for an API Key</a></li>
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='change-log'>Change Log</h1><h2 id='2024-05-09'>2024-05-09</h2>
<ul>
<li>Authentication

<ul>
<li>add <code>caigunn-access-token</code> for management</li>
</ul></li>
<li>Move endpoints

<ul>
<li>POST /api/external/chatbot/train --&gt; /api/external/chatbot/models</li>
<li>PATCH /api/external/chatbot/model_id --&gt; /api/external/chatbot</li>
<li>POST /api/external/chatbot/conversation --&gt; /api/external/chatbot/talk</li>
<li>GET /api/external/chatbot/conversation_uids --&gt; /api/external/chatbot/uids</li>
</ul></li>
<li>New endpoints

<ul>
<li>PUT /api/external/chatbot/opentalk</li>
<li>DELETE /api/external/chatbot/opentalk</li>
<li>POST /api/external/chatbot/training_data</li>
<li>PUT /api/external/chatbot/webhook</li>
</ul></li>
</ul>
<h2 id='2024-01-31'>2024-01-31</h2>
<ul>
<li>New endpoint

<ul>
<li>GET /api/external/chatbot/conversation_uids</li>
</ul></li>
<li>Update endpoints

<ul>
<li>POST /api/external/chatbot/conversation: add parameter <code>nickname</code></li>
<li>GET /api/external/chatbot/messages: add parameter <code>nickname</code></li>
</ul></li>
</ul>
<h2 id='2023-11-10'>2023-11-10</h2>
<ul>
<li>New endpoints

<ul>
<li>POST /api/external/chatbot/train</li>
<li>GET /api/external/chatbot/models</li>
<li>PATCH /api/external/chatbot/model_id</li>
<li>POST /api/external/chatbot/conversation</li>
<li>GET /api/external/chatbot/messages</li>
</ul></li>
</ul>
<h1 id='introduction'>Introduction</h1>
<p>Welcome to the CaiGunn API! You can use our API to setup and interact with chatbot.</p>

<p>We have language bindings in Shell and Python! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>
<h1 id='authentication'>Authentication</h1>
<p>CaiGunn uses API keys to allow access to the API. You can register and create chatbot at <a href="https://caigunn.ap-mic.com">CaiGunn</a>.</p>

<p>CaiGunn API expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code>api-key: CHATBOT_API_KEY</code></p>

<p>For chatbot manangement APIs, CaiGunn Access Token is needed. Include it in header that looks like following:</p>

<p><code>caigunn-access-token: CAIGUNN_ACCESS_TOKEN</code></p>

<aside class="notice">
You must replace <code>CHATBOT_API_KEY</code> with your personal chatbot api key and <code>CAIGUNN_ACCESS_TOKEN</code> with your caigunn access token.
</aside>
<h1 id='chatbot'>Chatbot</h1><h2 id='create-update-webhook'>Create/Update webhook</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> PUT <span class="s1">'https://caigunn-api.ap-mic.com/api/external/chatbot/webhook'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'caigunn-access-token: CAIGUNN_ACCESS_TOKEN'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s1">'{"webhook_url": WEBHOOK_URL}'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigunn-api.ap-mic.com/api/external/chatbot/webhook"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">"webhook_url"</span><span class="p">:</span> <span class="n">WEBHOOK_URL</span><span class="p">})</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span>
    <span class="s">"caigunn-access-token"</span><span class="p">:</span> <span class="n">CAIGUNN_ACCESS_TOKEN</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Webhook url update successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Set webhook url to subscribe chatbot events.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>PUT https://caigunn-api.ap-mic.com/api/external/chatbot/webhook</code></p>
<h3 id='header-parameters'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
<tr>
<td>caigunn-access-token</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Caigunn Access Token.</td>
</tr>
</tbody></table>
<h3 id='request-body-schema'>Request Body Schema</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>webhook_url</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Webhook url for chatbot event subscripiton.</td>
</tr>
</tbody></table>
<h2 id='create-training-data'>Create Training Data</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># Create by files</span>
curl <span class="nt">--location</span> <span class="s1">'https://caigunn-api.ap-mic.com/api/external/chatbot/training_data?type=file'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'caigunn-access-token: CAIGUNN_ACCESS_TOKEN'</span> <span class="se">\</span>
    <span class="nt">--form</span> <span class="s1">'files=@FILE'</span>

<span class="c"># Create by crawler</span>
curl <span class="nt">--location</span> <span class="s1">'https://caigunn-api.ap-mic.com/api/external/chatbot/training_data?type=crawler'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'caigunn-access-token: CAIGUNN_ACCESS_TOKEN'</span> <span class="se">\</span>
    <span class="nt">--form</span> <span class="s1">'website="WEBSITE"'</span> <span class="se">\</span>
    <span class="nt">--form</span> <span class="s1">'is_single_page="IS_SINGLE_PAGE"'</span>

<span class="c"># Create by text</span>
curl <span class="nt">--location</span> <span class="s1">'https://caigunn-api.ap-mic.com/api/external/chatbot/training_data?type=text'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'caigunn-access-token: CAIGUNN_ACCESS_TOKEN'</span> <span class="se">\</span>
    <span class="nt">--form</span> <span class="s1">'text=TEXT'</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Create by files
</span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigunn-api.ap-mic.com/api/external/chatbot/training_data?type=file"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"website"</span><span class="p">:</span> <span class="n">WEBSITE</span><span class="p">,</span> <span class="s">"is_single_page"</span><span class="p">:</span> <span class="n">IS_SINGLE_PAGE</span><span class="p">}</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span> <span class="s">"caigunn-access-token"</span><span class="p">:</span> <span class="n">CAIGUNN_ACCESS_TOKEN</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>


<span class="c1"># Create by crawler
</span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigunn-api.ap-mic.com/api/external/chatbot/training_data?type=crawler"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"website"</span><span class="p">:</span> <span class="n">WEBSITE</span><span class="p">,</span> <span class="s">"is_single_page"</span><span class="p">:</span> <span class="n">IS_SINGLE_PAGE</span><span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span> <span class="s">"caigunn-access-token"</span><span class="p">:</span> <span class="n">CAIGUNN_ACCESS_TOKEN</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

<span class="c1"># Create by text
</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigunn-api.ap-mic.com/api/external/chatbot/training_data?type=file"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">'text'</span><span class="p">:</span> <span class="s">'TEXT'</span><span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span> <span class="s">"caigunn-access-token"</span><span class="p">:</span> <span class="n">CAIGUNN_ACCESS_TOKEN</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">Create</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">files</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Creating training data in background"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">#</span><span class="w"> </span><span class="err">Create</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">crawler</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Crawling training data in background"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">#</span><span class="w"> </span><span class="err">Create</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">files</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Create training data successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<p>Create training data for model training. Create training data by crawler or uploading files will be processed in background and the result will be sent to the webhook.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://caigunn-api.ap-mic.com/api/external/chatbot/models</code></p>
<h3 id='header-parameters'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
<tr>
<td>caigunn-access-token</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Caigunn Access Token.</td>
</tr>
</tbody></table>
<h3 id='request-body-schema'>Request Body Schema</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Title for the trained model.</td>
</tr>
<tr>
<td>model_name</td>
<td>string</td>
<td>false</td>
<td>&quot;PaLM2&quot;</td>
<td>&quot;PaLM2&quot;, &quot;gpt-3.5-turbo&quot;, &quot;gpt-4&quot;, &quot;Gemini&quot;, &quot;Claude 2&quot;, &quot;Claude 3&quot;, &quot;CaiGunn001&quot;, &quot;Gemini 1.5&quot;</td>
</tr>
</tbody></table>
<h2 id='train-a-model'>Train a Model</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="s1">'https://caigunn-api.ap-mic.com/api/external/chatbot/models'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'caigunn-access-token: CAIGUNN_ACCESS_TOKEN'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s1">'{"text": TEXT, "title": TITLE}'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigunn-api.ap-mic.com/api/external/chatbot/models"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">"title"</span><span class="p">:</span> <span class="n">TITLE</span><span class="p">,</span> <span class="s">"model_name"</span><span class="p">:</span> <span class="n">MODEL_NAME</span><span class="p">})</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span>
    <span class="s">"caigunn-access-token"</span><span class="p">:</span> <span class="n">CAIGUNN_ACCESS_TOKEN</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Training in background"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Train a model. Result will be sent to the webhook.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://caigunn-api.ap-mic.com/api/external/chatbot/models</code></p>
<h3 id='header-parameters-2'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
<tr>
<td>caigunn-access-token</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Caigunn Access Token.</td>
</tr>
</tbody></table>
<h3 id='request-body-schema-2'>Request Body Schema</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Title for the trained model.</td>
</tr>
<tr>
<td>model_name</td>
<td>string</td>
<td>false</td>
<td>&quot;PaLM2&quot;</td>
<td>&quot;PaLM2&quot;, &quot;gpt-3.5-turbo&quot;, &quot;gpt-4&quot;, &quot;Gemini&quot;, &quot;Claude 2&quot;, &quot;Claude 3&quot;, &quot;CaiGunn001&quot;, &quot;Gemini 1.5&quot;</td>
</tr>
</tbody></table>
<h2 id='get-all-models'>Get All Models</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="s1">'https://caigunn-api.ap-mic.com/api/external/chatbot/models'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'caigunn-access-token: CAIGUNN_ACCESS_TOKEN'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigunn-api.ap-mic.com/api/external/chatbot/models"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span> <span class="s">"caigunn-access-token"</span><span class="p">:</span> <span class="n">CAIGUNN_ACCESS_TOKEN</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"models"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-11-06T09:09:41.552Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-11-06T09:09:41.552Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"chat-bison"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint retrieves all models.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET http://caigunn-api.ap-mic.com/api/external/chatbot/models</code></p>
<h3 id='header-parameters-3'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
<tr>
<td>caigunn-access-token</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Caigunn Access Token.</td>
</tr>
</tbody></table>
<h2 id='update-chatbot-model'>Update Chatbot Model</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> PUT <span class="s1">'https://caigunn-api.ap-mic.com/api/external/chatbot'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'caigunn-access-token: CAIGUNN_ACCESS_TOKEN'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s1">'{"model_id": MODEL_ID}'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigunn-api.ap-mic.com/api/external/chatbot"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">"model_id"</span><span class="p">:</span> <span class="n">MODEL_ID</span><span class="p">})</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span> <span class="s">"caigunn-access-token"</span><span class="p">:</span> <span class="n">CAIGUNN_ACCESS_TOKEN</span><span class="p">,</span> <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Update successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint updates the model of chatbot.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>PATCH https://caigunn-api.ap-mic.com/api/external/chatbot</code></p>
<h3 id='header-parameters-4'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
<tr>
<td>caigunn-access-token</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Caigunn Access Token.</td>
</tr>
</tbody></table>
<h3 id='request-body-schema-3'>Request Body Schema</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>model_id</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Model id.</td>
</tr>
</tbody></table>
<h2 id='talk-with-chatbot'>Talk With Chatbot</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="s1">'https://caigunn-api.ap-mic.com/api/external/chatbot/talk&amp;nickname=NICKNAME'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'uid: CUSTUM_UID'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s1">'{"text": TEXT}'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"http://caigunn-api.ap-mic.com/api/external/chatbot/talk&amp;nickname=NICKNAME"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">"text"</span><span class="p">:</span> <span class="n">TEXT</span><span class="p">})</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span> <span class="s">"uid"</span><span class="p">:</span> <span class="n">CUSTUM_UID</span><span class="p">,</span> <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Send message to chatbot and get response.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://caigunn-api.ap-mic.com/api/external/chatbot/talk</code></p>
<h3 id='header-parameters'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
<tr>
<td>uid</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Custom UID for identify conversation.</td>
</tr>
</tbody></table>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>nickname</td>
<td>string</td>
<td>false</td>
<td></td>
<td>Nickname of the conversation participant.</td>
</tr>
</tbody></table>
<h3 id='request-body-schema'>Request Body Schema</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>text</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Message from the conversation participant.</td>
</tr>
</tbody></table>
<h2 id='get-historical-messages'>Get Historical Messages</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="s1">'https://caigunn-api.ap-mic.com/api/external/chatbot/messages?offset=OFFSET&amp;limit=LIMIT&amp;start_at=START_AT&amp;end_at=END_AT&amp;nickname=NICKNAME'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'uid: CUSTUM_UID'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigunn-api.ap-mic.com/api/external/chatbot/messages?offset=OFFSET&amp;limit=LIMIT&amp;start_at=START_AT&amp;end_at=END_AT&amp;nickname=NICKNAME"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span> <span class="s">"uid"</span><span class="p">:</span> <span class="n">CUSTUM_UID</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-08-24T14:15:22Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receive"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"send"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kwargs"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint retrieves historical messages from a conversation.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://caigunn-api.ap-mic.com/api/external/chatbot/messages</code></p>
<h3 id='header-parameters-2'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
<tr>
<td>uid</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Custom UID for identify conversation.</td>
</tr>
</tbody></table>
<h3 id='query-parameters-2'>Query Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offset</td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>false</td>
<td>30</td>
<td></td>
</tr>
<tr>
<td>start_at</td>
<td>datetime</td>
<td>false</td>
<td></td>
<td></td>
</tr>
<tr>
<td>end_at</td>
<td>datetime</td>
<td>false</td>
<td></td>
<td></td>
</tr>
<tr>
<td>nickname</td>
<td>string</td>
<td>false</td>
<td></td>
<td>Nickname of the conversation participant.</td>
</tr>
</tbody></table>
<h2 id='get-conversation-uids'>Get Conversation UIDs</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="s1">'https://caigunn-api.ap-mic.com/api/external/chatbot/uids?offset=OFFSET&amp;limit=LIMIT&amp;start_at=START_AT&amp;end_at=END_AT'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigunn-api.ap-mic.com/api/external/chatbot/uids?offset=OFFSET&amp;limit=LIMIT&amp;start_at=START_AT&amp;end_at=END_AT"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span> <span class="s">"uid"</span><span class="p">:</span> <span class="n">CUSTUM_UID</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"uids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"nickname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_sent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_sent_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint retrieves conversation UIDs.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET https://caigunn-api.ap-mic.com/api/external/chatbot/uids</code></p>
<h3 id='header-parameters-3'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
</tbody></table>
<h3 id='query-parameters-3'>Query Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offset</td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>false</td>
<td>30</td>
<td></td>
</tr>
<tr>
<td>start_at</td>
<td>datetime</td>
<td>false</td>
<td>1970-1-1</td>
<td>Get UIDs where last_sent_at is greater than or equal start_at.</td>
</tr>
<tr>
<td>end_at</td>
<td>datetime</td>
<td>false</td>
<td>current datetime</td>
<td>Get UIDs where last_sent_at is less than or equal end_at.</td>
</tr>
</tbody></table>
<h2 id='bind-opentalk-device'>Bind Opentalk Device</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> PUT <span class="s1">'https://caigunn-api.ap-mic.com/api/external/chatbot/opentalk'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'caigunn-access-token: CAIGUNN_ACCESS_TOKEN'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s1">'{"email": OPENTALK_USER_EMAIL, "device_id": OPENTALK_DEVICE_ID}'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigunn-api.ap-mic.com/api/external/chatbot/opentalk"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">"email"</span><span class="p">:</span> <span class="n">OPENTALK_USER_EMAIL</span><span class="p">,</span> <span class="s">"device_id"</span><span class="p">:</span> <span class="n">OPENTALK_DEVICE_ID</span><span class="p">})</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span>
    <span class="s">"caigunn-access-token"</span><span class="p">:</span> <span class="n">CAIGUNN_ACCESS_TOKEN</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bind Opentalk successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Bind with Opentalk to access device&#39;s conversation script, live chat support, and analytics features.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>PUT https://caigunn-api.ap-mic.com/api/external/chatbot/opentalk</code></p>
<h3 id='header-parameters'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
<tr>
<td>caigunn-access-token</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Caigunn Access Token.</td>
</tr>
</tbody></table>
<h3 id='request-body-schema'>Request Body Schema</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Email of the Opentalk user.</td>
</tr>
<tr>
<td>device_id</td>
<td>string</td>
<td>true</td>
<td></td>
<td>ID of the Opentalk device.</td>
</tr>
</tbody></table>
<h2 id='unbind-opentalk-device'>Unbind Opentalk Device</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> DELETE <span class="s1">'https://caigunn-api.ap-mic.com/api/external/chatbot/opentalk'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'caigunn-access-token: CAIGUNN_ACCESS_TOKEN'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigunn-api.ap-mic.com/api/external/chatbot/opentalk"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span>
    <span class="s">"caigunn-access-token"</span><span class="p">:</span> <span class="n">CAIGUNN_ACCESS_TOKEN</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unbind Opentalk successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Unbind Opentalk device.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>DELETE https://caigunn-api.ap-mic.com/api/external/chatbot/opentalk</code></p>
<h3 id='header-parameters-2'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
<tr>
<td>caigunn-access-token</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Caigunn Access Token.</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>The CaiGunn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="python">Python-Request</a>
          </div>
      </div>
    </div>
  </body>
</html>
