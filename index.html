
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the CaiGun API"
        >
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-9c19b03a.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-966d6edc.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/apmic_logo_light.aed03332-2ea4d1f2.svg" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="python">Python-Request</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#change-log" class="toc-h1 toc-link" data-title="Change Log">Change Log</a>
          </li>
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#model" class="toc-h1 toc-link" data-title="Model">Model</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#train-a-model" class="toc-h2 toc-link" data-title="Train a Model">Train a Model</a>
                  </li>
                  <li>
                    <a href="#get-all-models" class="toc-h2 toc-link" data-title="Get All Models">Get All Models</a>
                  </li>
                  <li>
                    <a href="#update-chatbot-model" class="toc-h2 toc-link" data-title="Update Chatbot Model">Update Chatbot Model</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#message" class="toc-h1 toc-link" data-title="Message">Message</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#conversation-with-chatbot" class="toc-h2 toc-link" data-title="Conversation With Chatbot">Conversation With Chatbot</a>
                  </li>
                  <li>
                    <a href="#get-historical-messages" class="toc-h2 toc-link" data-title="Get Historical Messages">Get Historical Messages</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://caigun.ap-mic.com'>Sign Up for an API Key</a></li>
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='change-log'>Change Log</h1>
<p>2023-11-10</p>

<ul>
<li>New endpoints

<ul>
<li>POST /api/external/chatbot/train</li>
<li>GET /api/external/chatbot/models</li>
<li>PATCH /api/external/chatbot/model_id</li>
<li>POST /api/external/chatbot/conversation</li>
<li>GET /api/external/chatbot/messages</li>
</ul></li>
</ul>
<h1 id='introduction'>Introduction</h1>
<p>Welcome to the CaiGun API! You can use our API to setup and interact with chatbot.</p>

<p>We have language bindings in Shell and Python! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>
<h1 id='authentication'>Authentication</h1>
<p>CaiGun uses API keys to allow access to the API. You can register and create chatbot at <a href="https://caigun.ap-mic.com">CaiGun</a>.</p>

<p>CaiGun API expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code>api-key: CHATBOT_API_KEY</code></p>

<aside class="notice">
You must replace <code>CHATBOT_API_KEY</code> with your personal API key.
</aside>
<h1 id='model'>Model</h1><h2 id='train-a-model'>Train a Model</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="s1">'https://caigun-api.ap-mic.com/api/chatbot/train'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s1">'{"text": TEXT, "title": TITLE, "model_name": MODEL_NAME}'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigun-api.ap-mic.com/api/chatbot/train"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">text</span><span class="se">\"</span><span class="s">: TEXT, </span><span class="se">\"</span><span class="s">title</span><span class="se">\"</span><span class="s">: TITLE, </span><span class="se">\"</span><span class="s">model_name</span><span class="se">\"</span><span class="s">: MODEL_NAME}"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'api-key'</span><span class="p">:</span> <span class="s">'CHATBOT_API_KEY'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11111111-1111-1111-1111-111111111111"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Train a model by text content.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://caigun-api.ap-mic.com/api/external/chatbot/train</code></p>
<h3 id='header-parameters'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
</tbody></table>
<h3 id='request-body-schema'>Request Body Schema</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>text</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Text for model training.</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Title for the trained model.</td>
</tr>
<tr>
<td>model_name</td>
<td>string</td>
<td>false</td>
<td>&quot;chat-bison&quot;</td>
<td>&quot;chat-bison&quot;, &quot;azure-gpt-3.5-turbo-0613&quot;, &quot;azure-gpt-4-0613&quot;</td>
</tr>
</tbody></table>
<h2 id='get-all-models'>Get All Models</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="s1">'https://caigun-api.ap-mic.com/api/external/chatbot/models'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigun-api.ap-mic.com/api/external/chatbot/models"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"api-key"</span><span class="p">:</span> <span class="s">"CHATBOT_API_KEY"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"models"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-11-06T09:09:41.552Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-11-06T09:09:41.552Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"chat-bison"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint retrieves all models.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET http://caigun-api.ap-mic.com/api/external/chatbot/models</code></p>
<h3 id='header-parameters-2'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
</tbody></table>
<h2 id='update-chatbot-model'>Update Chatbot Model</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> PATCH <span class="s1">'https://caigun-api.ap-mic.com/api/external/chatbot/model_id'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s1">'{"id": MODEL_ID}'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigun-api.ap-mic.com/api/external/chatbot/model_id"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">'{"id": MODEL_ID}'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"api-key"</span><span class="p">:</span> <span class="s">"CHATBOT_API_KEY"</span><span class="p">,</span> <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PATCH"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Update successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint updates the model of chatbot.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>PATCH https://caigun-api.ap-mic.com/api/external/chatbot/model_id</code></p>
<h3 id='header-parameters-3'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
</tbody></table>
<h3 id='request-body-schema-2'>Request Body Schema</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Model id.</td>
</tr>
</tbody></table>
<h1 id='message'>Message</h1><h2 id='conversation-with-chatbot'>Conversation With Chatbot</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="s1">'https://caigun-api.ap-mic.com/api/external/chatbot/conversation'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'uid: CUSTUM_UID'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s1">'{"text": TEXT}'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigun-api.ap-mic.com/api/external/chatbot/conversation"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">'{"text": TEXT}'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span> <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Send message to chatbot and get response.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://caigun-api.ap-mic.com/api/external/chatbot/conversation</code></p>
<h3 id='header-parameters'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
<tr>
<td>uid</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Custom UID for identify conversation.</td>
</tr>
</tbody></table>
<h2 id='get-historical-messages'>Get Historical Messages</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="s1">'https://caigun-api.ap-mic.com/api/external/chatbot/messages?offset=OFFSET&amp;limit=LIMIT&amp;start_at=START_AT&amp;end_at=END_AT'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'api-key: CHATBOT_API_KEY'</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s1">'uid: CUSTUM_UID'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://caigun-api.ap-mic.com/api/external/chatbot/messages?offset=OFFSET&amp;limit=LIMIT&amp;start_at=START_AT&amp;end_at=END_AT"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"api-key"</span><span class="p">:</span> <span class="n">CHATBOT_API_KEY</span><span class="p">,</span> <span class="s">"uid"</span><span class="p">:</span> <span class="n">CUSTUM_UID</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-08-24T14:15:22Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receive"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"send"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kwargs"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint retrieves historical messages from a conversation.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://caigun-api.ap-mic.com/api/external/chatbot/messages</code></p>
<h3 id='header-parameters-2'>Header Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api-key</td>
<td>string</td>
<td>true</td>
<td></td>
<td>API Key.</td>
</tr>
<tr>
<td>uid</td>
<td>string</td>
<td>true</td>
<td></td>
<td>Custom UID for identify conversation.</td>
</tr>
</tbody></table>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Mandatory</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offset</td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>false</td>
<td>30</td>
<td></td>
</tr>
<tr>
<td>start_at</td>
<td>datetime</td>
<td>false</td>
<td></td>
<td></td>
</tr>
<tr>
<td>end_at</td>
<td>datetime</td>
<td>false</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>The CaiGun API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="python">Python-Request</a>
          </div>
      </div>
    </div>
  </body>
</html>
